---
// Este componente muestra un esqueleto de carga para los libros
// mientras se están aplicando filtros

interface Props {
  count?: number;
}

const { count = 6 } = Astro.props;
---

<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mt-8 min-h-[300px] px-8">
  {Array(count).fill(0).map((_, i) => (
    <div class="skeleton-card bg-white rounded-xl overflow-hidden w-full max-w-sm flex flex-col h-full shadow-md">
      <!-- Skeleton para imagen de portada -->
      <div class="h-52 bg-gray-200 animate-pulse-subtle">
        <!-- Tags de nivel y destacado -->
        <div class="flex justify-between p-3">
          <div class="h-6 w-20 bg-gray-300 rounded-full"></div>
          <div class="h-6 w-24 bg-gray-300 rounded-full"></div>
        </div>
      </div>
      
      <!-- Skeleton para contenido -->
      <div class="p-5 flex flex-col flex-grow space-y-4">
        <!-- Título -->
        <div class="h-7 bg-gray-200 rounded-md w-4/5 animate-pulse-subtle"></div>
        
        <!-- Tags -->
        <div class="flex flex-wrap gap-2">
          <div class="h-6 w-16 bg-gray-200 rounded-md animate-pulse-subtle"></div>
          <div class="h-6 w-20 bg-gray-200 rounded-md animate-pulse-subtle"></div>
          <div class="h-6 w-24 bg-gray-200 rounded-md animate-pulse-subtle"></div>
        </div>
        
        <!-- Descripción -->
        <div class="space-y-2">
          <div class="h-4 bg-gray-200 rounded-md w-full animate-pulse-subtle"></div>
          <div class="h-4 bg-gray-200 rounded-md w-5/6 animate-pulse-subtle"></div>
        </div>
        
        <!-- Precio -->
        <div class="h-8 bg-gray-300 rounded-md w-1/3 animate-pulse-subtle"></div>
        
        <!-- Elementos incluidos -->
        <div class="space-y-2 flex-grow">
          <div class="h-5 bg-gray-200 rounded-md w-1/3 animate-pulse-subtle"></div>
          <div class="h-4 bg-gray-200 rounded-md w-full animate-pulse-subtle"></div>
          <div class="h-4 bg-gray-200 rounded-md w-11/12 animate-pulse-subtle"></div>
          <div class="h-4 bg-gray-200 rounded-md w-10/12 animate-pulse-subtle"></div>
        </div>
        
        <!-- Rating -->
        <div class="flex items-center gap-2">
          <div class="h-5 bg-gray-200 rounded-md w-32 animate-pulse-subtle"></div>
        </div>
        
        <!-- Buttons -->
        <div class="flex space-x-2 mt-auto">
          <div class="h-10 bg-gray-300 rounded-lg w-2/3 animate-pulse-subtle"></div>
          <div class="h-10 bg-gray-200 rounded-lg w-1/3 animate-pulse-subtle"></div>
        </div>
      </div>
    </div>
  ))}
</div>

<style>
  @keyframes shimmer {
    0% {
      background-position: -468px 0;
    }
    100% {
      background-position: 468px 0;
    }
  }

  .skeleton-card {
    position: relative;
  }

  .animate-pulse-subtle {
    position: relative;
    overflow: hidden;
  }

  .animate-pulse-subtle::after {
    content: "";
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    background: linear-gradient(to right, 
      rgba(255, 255, 255, 0) 0%,
      rgba(255, 255, 255, 0.2) 50%,
      rgba(255, 255, 255, 0) 100%);
    background-size: 100% 100%;
    animation: shimmer 2s infinite;
  }
</style>
