---
import CellphoneMessageIcon from './icons/CellphoneMessage.astro';
import ShieldCheckIcon from './icons/ShieldCheck.astro';
import WhatsAppIcon from './icons/WhatsApp.astro';
import TelegramIcon from './icons/Telegram.astro';
import ArrowRightIcon from './icons/ArrowRight.astro';
import Button from './Button.astro';

// Define the variant type to match Button component's expectations
type ButtonVariant = 'primary' | 'secondary' | 'accent' | 'outline' | 'ghost' | undefined;

// Define social sharing options
const socialOptions = [
	{
		name: 'WhatsApp',
		icon: WhatsAppIcon,
		url: 'https://wa.me/1234567890?text=Hola,%20adjunto%20mi%20comprobante%20de%20pago%20para%20mi%20pedido%20en%20FluentReads.',
		variant: 'accent' as ButtonVariant,
		description: 'Respuesta r√°pida',
		emoji: '‚ö°',
	},
	{
		name: 'Telegram',
		icon: TelegramIcon,
		url: 'https://t.me/FluentReads',
		variant: 'primary' as ButtonVariant,
		description: 'Archivos grandes',
		emoji: 'üìÅ',
	},
];
---

<div class="w-full max-w-xs sm:max-w-sm md:max-w-md lg:max-w-xl bg-gradient-to-br from-primary-light to-primary rounded-lg shadow-md p-3 sm:p-4 overflow-hidden flex flex-col mb-6 sm:mb-8 mx-auto">
	<!-- Header -->
	<div class="flex items-center space-x-2 pb-2 border-b border-white/10 mb-2 sm:mb-3">
		<CellphoneMessageIcon class="w-4 h-4 sm:w-5 sm:h-5 text-secondary" />
		<h3 class="text-white font-semibold text-xs sm:text-sm">Env√≠a tu comprobante:</h3>
	</div>

	<!-- Social buttons -->
	<div class="flex flex-col sm:flex-row justify-around space-y-2 sm:space-y-0 sm:space-x-2 flex-1 overflow-y-auto pr-1">
		{
			socialOptions.map((option) => (
				<Button 
					variant={option.variant}
					href={option.url}
					class="justify-between rounded-md w-full"
					aria-label={`Enviar por ${option.name}`}
				>
					<!-- Icon with badge -->
					<div class="flex-shrink-0 w-7 h-7 sm:w-8 sm:h-8 bg-white/10 rounded flex items-center justify-center mr-2 relative">
						<option.icon class="w-3.5 h-3.5 sm:w-4 sm:h-4" />
						<span class="absolute -top-1 -right-1 w-3.5 h-3.5 sm:w-4 sm:h-4 flex items-center justify-center bg-white text-[10px] sm:text-xs text-black rounded-full">
							{option.emoji}
						</span>
					</div>
					
					<!-- Text content -->
					<div class="flex-1 min-w-0 text-left">
						<span class="block font-medium text-xs sm:text-sm truncate">{option.name}</span>
						<span class="block text-[10px] sm:text-xs opacity-80 truncate">{option.description}</span>
					</div>
					
					<!-- Arrow icon -->
					<ArrowRightIcon class="w-3.5 h-3.5 sm:w-4 sm:h-4 ml-1 transform group-hover:translate-x-1 transition-transform duration-200 arrow-icon" />
				</Button>
			))
		}
	</div>

	<!-- Footer -->
	<div class="flex items-center space-x-1 pt-2 mt-1 sm:mt-2 border-t border-white/10">
		<ShieldCheckIcon class="w-2.5 h-2.5 sm:w-3 sm:h-3 text-secondary" />
		<p class="text-white/70 text-[10px] sm:text-xs">Datos protegidos</p>
	</div>
</div>

<script>
	document.addEventListener('DOMContentLoaded', () => {
		document.querySelectorAll('.arrow-icon').forEach(icon => {
			const element = icon as HTMLElement;
			element.parentElement?.addEventListener('mouseenter', () => {
				element.classList.add('animate-bounce-x');
				setTimeout(() => {
					element.classList.remove('animate-bounce-x');
				}, 500);
			});
		});
	});
</script>
